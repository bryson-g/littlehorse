"use strict";(self.webpackChunklh_site=self.webpackChunklh_site||[]).push([[6469],{3905:(e,a,t)=>{t.d(a,{Zo:()=>d,kt:()=>k});var r=t(7294);function n(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function s(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?s(Object(t),!0).forEach((function(a){n(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function u(e,a){if(null==e)return{};var t,r,n=function(e,a){if(null==e)return{};var t,r,n={},s=Object.keys(e);for(r=0;r<s.length;r++)t=s[r],a.indexOf(t)>=0||(n[t]=e[t]);return n}(e,a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)t=s[r],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}var o=r.createContext({}),i=function(e){var a=r.useContext(o),t=a;return e&&(t="function"==typeof e?e(a):l(l({},a),e)),t},d=function(e){var a=i(e.components);return r.createElement(o.Provider,{value:a},e.children)},p="mdxType",c={inlineCode:"code",wrapper:function(e){var a=e.children;return r.createElement(r.Fragment,{},a)}},m=r.forwardRef((function(e,a){var t=e.components,n=e.mdxType,s=e.originalType,o=e.parentName,d=u(e,["components","mdxType","originalType","parentName"]),p=i(t),m=n,k=p["".concat(o,".").concat(m)]||p[m]||c[m]||s;return t?r.createElement(k,l(l({ref:a},d),{},{components:t})):r.createElement(k,l({ref:a},d))}));function k(e,a){var t=arguments,n=a&&a.mdxType;if("string"==typeof e||n){var s=t.length,l=new Array(s);l[0]=m;var u={};for(var o in a)hasOwnProperty.call(a,o)&&(u[o]=a[o]);u.originalType=e,u[p]="string"==typeof e?e:n,l[1]=u;for(var i=2;i<s;i++)l[i]=t[i];return r.createElement.apply(null,l)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},5162:(e,a,t)=>{t.d(a,{Z:()=>l});var r=t(7294),n=t(6010);const s={tabItem:"tabItem_Ymn6"};function l(e){let{children:a,hidden:t,className:l}=e;return r.createElement("div",{role:"tabpanel",className:(0,n.Z)(s.tabItem,l),hidden:t},a)}},4866:(e,a,t)=>{t.d(a,{Z:()=>v});var r=t(7462),n=t(7294),s=t(6010),l=t(2466),u=t(6550),o=t(1980),i=t(7392),d=t(12);function p(e){return function(e){return n.Children.map(e,(e=>{if(!e||(0,n.isValidElement)(e)&&function(e){const{props:a}=e;return!!a&&"object"==typeof a&&"value"in a}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:a,label:t,attributes:r,default:n}}=e;return{value:a,label:t,attributes:r,default:n}}))}function c(e){const{values:a,children:t}=e;return(0,n.useMemo)((()=>{const e=a??p(t);return function(e){const a=(0,i.l)(e,((e,a)=>e.value===a.value));if(a.length>0)throw new Error(`Docusaurus error: Duplicate values "${a.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[a,t])}function m(e){let{value:a,tabValues:t}=e;return t.some((e=>e.value===a))}function k(e){let{queryString:a=!1,groupId:t}=e;const r=(0,u.k6)(),s=function(e){let{queryString:a=!1,groupId:t}=e;if("string"==typeof a)return a;if(!1===a)return null;if(!0===a&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:a,groupId:t});return[(0,o._X)(s),(0,n.useCallback)((e=>{if(!s)return;const a=new URLSearchParams(r.location.search);a.set(s,e),r.replace({...r.location,search:a.toString()})}),[s,r])]}function f(e){const{defaultValue:a,queryString:t=!1,groupId:r}=e,s=c(e),[l,u]=(0,n.useState)((()=>function(e){let{defaultValue:a,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(a){if(!m({value:a,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${a}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return a}const r=t.find((e=>e.default))??t[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:a,tabValues:s}))),[o,i]=k({queryString:t,groupId:r}),[p,f]=function(e){let{groupId:a}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(a),[r,s]=(0,d.Nk)(t);return[r,(0,n.useCallback)((e=>{t&&s.set(e)}),[t,s])]}({groupId:r}),g=(()=>{const e=o??p;return m({value:e,tabValues:s})?e:null})();(0,n.useLayoutEffect)((()=>{g&&u(g)}),[g]);return{selectedValue:l,selectValue:(0,n.useCallback)((e=>{if(!m({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);u(e),i(e),f(e)}),[i,f,s]),tabValues:s}}var g=t(2389);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function h(e){let{className:a,block:t,selectedValue:u,selectValue:o,tabValues:i}=e;const d=[],{blockElementScrollPositionUntilNextRender:p}=(0,l.o5)(),c=e=>{const a=e.currentTarget,t=d.indexOf(a),r=i[t].value;r!==u&&(p(a),o(r))},m=e=>{let a=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const t=d.indexOf(e.currentTarget)+1;a=d[t]??d[0];break}case"ArrowLeft":{const t=d.indexOf(e.currentTarget)-1;a=d[t]??d[d.length-1];break}}a?.focus()};return n.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.Z)("tabs",{"tabs--block":t},a)},i.map((e=>{let{value:a,label:t,attributes:l}=e;return n.createElement("li",(0,r.Z)({role:"tab",tabIndex:u===a?0:-1,"aria-selected":u===a,key:a,ref:e=>d.push(e),onKeyDown:m,onClick:c},l,{className:(0,s.Z)("tabs__item",b.tabItem,l?.className,{"tabs__item--active":u===a})}),t??a)})))}function y(e){let{lazy:a,children:t,selectedValue:r}=e;const s=(Array.isArray(t)?t:[t]).filter(Boolean);if(a){const e=s.find((e=>e.props.value===r));return e?(0,n.cloneElement)(e,{className:"margin-top--md"}):null}return n.createElement("div",{className:"margin-top--md"},s.map(((e,a)=>(0,n.cloneElement)(e,{key:a,hidden:e.props.value!==r}))))}function T(e){const a=f(e);return n.createElement("div",{className:(0,s.Z)("tabs-container",b.tabList)},n.createElement(h,(0,r.Z)({},e,a)),n.createElement(y,(0,r.Z)({},e,a)))}function v(e){const a=(0,g.Z)();return n.createElement(T,(0,r.Z)({key:String(a)},e))}},4910:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>d,contentTitle:()=>o,default:()=>k,frontMatter:()=>u,metadata:()=>i,toc:()=>p});var r=t(7462),n=(t(7294),t(3905)),s=t(4866),l=t(5162);const u={},o="User Tasks",i={unversionedId:"developer-guide/wfspec-development/user-tasks",id:"developer-guide/wfspec-development/user-tasks",title:"User Tasks",description:"User Tasks allow you to manage tasks involving humans alongside standard computer tasks in your LittleHorse Workflow.",source:"@site/docs/05-developer-guide/08-wfspec-development/08-user-tasks.md",sourceDirName:"05-developer-guide/08-wfspec-development",slug:"/developer-guide/wfspec-development/user-tasks",permalink:"/docs/developer-guide/wfspec-development/user-tasks",draft:!1,tags:[],version:"current",sidebarPosition:8,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Child Threads",permalink:"/docs/developer-guide/wfspec-development/child-threads"},next:{title:"Using the LittleHorse API",permalink:"/docs/developer-guide/grpc/"}},d={},p=[{value:"Assigning User Tasks",id:"assigning-user-tasks",level:2},{value:"Assigning to Users",id:"assigning-to-users",level:3},{value:"Assigning to Groups",id:"assigning-to-groups",level:3},{value:"Using User Task Outputs",id:"using-user-task-outputs",level:2},{value:"Using the Form Output",id:"using-the-form-output",level:3},{value:"Reminder Tasks",id:"reminder-tasks",level:3},{value:"Automatic Reassignment",id:"automatic-reassignment",level:3}],c={toc:p},m="wrapper";function k(e){let{components:a,...t}=e;return(0,n.kt)(m,(0,r.Z)({},c,t,{components:a,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"user-tasks"},"User Tasks"),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"/docs/concepts/user-tasks"},"User Tasks")," allow you to manage tasks involving humans alongside standard computer tasks in your LittleHorse Workflow."),(0,n.kt)("p",null,"You can use the Workflow SDK's to schedule User Tasks, and also create lifecycle hooks such as:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Automatic Reassignment"),(0,n.kt)("li",{parentName:"ul"},"Reminder Tasks"),(0,n.kt)("li",{parentName:"ul"},"Automatic Cancellation.")),(0,n.kt)("p",null,"See the ",(0,n.kt)("a",{parentName:"p",href:"/docs/developer-guide/grpc/managing-metadata"},"Metadata Management docs")," for information about how to create a ",(0,n.kt)("inlineCode",{parentName:"p"},"UserTaskDef"),"."),(0,n.kt)("h2",{id:"assigning-user-tasks"},"Assigning User Tasks"),(0,n.kt)("p",null,"You can assign a User Task in two ways:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"To a specific User, specified by an arbitrary user id (and optionally a user group)."),(0,n.kt)("li",{parentName:"ul"},"To a group of users.")),(0,n.kt)("h3",{id:"assigning-to-users"},"Assigning to Users"),(0,n.kt)("p",null,"To assign a user task to a specific user who is not a part of a group, you can use ",(0,n.kt)("inlineCode",{parentName:"p"},"WorkflowThread#assignTaskToUser()"),"."),(0,n.kt)(s.Z,{mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"java",label:"Java",default:!0,mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-java"},'String hardCodedUserId = "some-user-id-or-email";\nWfRunVariable userIdVariable = wf.addVariable("user-id", VariableType.STR);\n\n// Hard-coded using a string\nwf.assignUserTask("some-user-task-def", hardCodedUserId, null);\n\n// Using a variable to set User Id\nwf.assignUserTask("another-user-task-def", userIdVariable, null);\n'))),(0,n.kt)(l.Z,{value:"go",label:"Go",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-go"},'hardCodedUserId := "some-user-id-or-email"\nuserIdVariable := wf.AddVariable("user-id", model.VariableType_STR)\n\n// Hard-coded using a string\nwf.AssignUserTask("some-user-task-def", &hardCodedUserId, nil)\n\n// Using a variable to set User Id\nwf.AssignUserTask("some-user-task-def", userIdVariable, nil)\n'))),(0,n.kt)(l.Z,{value:"python",label:"Python",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},'hard_coded_user_id = "some-user-id-or-email"\nuser_id_variable = wf.add_variable("user-id", VariableType.STR)\n\n# assign using a hard coded string\nwf.assign_user_task("some-user-task", user_id=hard_coded_user_id)\n\n# assign using a variable\nwf.assign_user_task("some-user-task", user_id=user_id_variable)\n')))),(0,n.kt)("p",null,"You can also assign a user task to a user as part of a group using ",(0,n.kt)("inlineCode",{parentName:"p"},"WorkflowThread#assignUserTask"),":"),(0,n.kt)(s.Z,{mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"java",label:"Java",default:!0,mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-java"},'WfRunVariable userIdVariable = wf.addVariable("user-id", VariableType.STR);\nWfRunVariable userGroupVariable = wf.addVariable("user-group", VariableType.STR);\nString hardCodedUserGroup = "finance";\n\n// Hard-coded using a string\nwf.asignUserTask("some-user-task-def", userIdVariable, hardCodedUserGroup);\n\n// Using a variable to set User Group\nwf.assignUserTask("another-user-task-def", userIdVariable, userGroupVariable);\n'))),(0,n.kt)(l.Z,{value:"go",label:"Go",mdxType:"TabItem"},(0,n.kt)("p",null,"Golang user task docs coming soon. But if you want, you can try it out anyways \ud83d\ude09."))),(0,n.kt)("h3",{id:"assigning-to-groups"},"Assigning to Groups"),(0,n.kt)("p",null,"You can assign a task to a user group using ",(0,n.kt)("inlineCode",{parentName:"p"},"WorkflowThread#assignUserTask()"),"."),(0,n.kt)(s.Z,{mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"java",label:"Java",default:!0,mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-java"},'String hardCodedUserGroup = "sales";\nWfRunVariable userGroupVariable = wf.addVariable("user-group", VariableType.STR);\n\n// Hard-coded using a string\nString userId = null;\nwf.assignUserTask("some-user-task-def", userId, hardCodedUserGroup);\n\n// Using a variable to set User Group\nwf.assignUserTask("another-user-task-def", userId, userGroupVariable);\n'))),(0,n.kt)(l.Z,{value:"go",label:"Go",mdxType:"TabItem"},(0,n.kt)("p",null,"GoLang docs for user tasks coming soon. But if you want, you can try it out anyways \ud83d\ude09."))),(0,n.kt)("h2",{id:"using-user-task-outputs"},"Using User Task Outputs"),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},"assignTaskToUser")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"assignTaskToUserGroup")," methods return a ",(0,n.kt)("inlineCode",{parentName:"p"},"UserTaskOutput"),", which is a special type of ",(0,n.kt)("inlineCode",{parentName:"p"},"NodeOutput"),". It can be used to:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Mutate variables"),(0,n.kt)("li",{parentName:"ul"},"Schedule reminder tasks"),(0,n.kt)("li",{parentName:"ul"},"Schedule user task reassignment.")),(0,n.kt)("h3",{id:"using-the-form-output"},"Using the Form Output"),(0,n.kt)("p",null,"You can use a ",(0,n.kt)("inlineCode",{parentName:"p"},"UserTaskOutput")," to mutate variables. Note that a ",(0,n.kt)("inlineCode",{parentName:"p"},"UserTaskDef")," has a series of fields, where each field has a ",(0,n.kt)("inlineCode",{parentName:"p"},"name")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"value")," (which is a ",(0,n.kt)("inlineCode",{parentName:"p"},"VariableValue")," containing a primitive type)."),(0,n.kt)("p",null,"The ",(0,n.kt)("inlineCode",{parentName:"p"},"UserTaskOutput")," is essentially a Json output where each key is the name of each field, and the value is the value typed by the user. Let's say I have a user task def with two fields:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"userName"),", which is a ",(0,n.kt)("inlineCode",{parentName:"li"},"STR")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"age"),", which is an ",(0,n.kt)("inlineCode",{parentName:"li"},"INT"))),(0,n.kt)("p",null,"You can use the value as follows:"),(0,n.kt)(s.Z,{mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"java",label:"Java",default:!0,mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-java"},'WfRunVariable age = wf.addVariable("age", VariableType.INT);\nWfRunavariable userName = wf.addVariable("user-name", VariableType.STR);\n\nUserTaskOutput formResults = wf.assignUserTask("my-user-task", "obi-wan", null);\nwf.mutate(age, VariableMutationType.ASSIGN, formResults.jsonPath("$.age"));\nwf.mutate(userName, VariableMutationType.ASSIGN, formResults.jsonPath("$.userName"));\n'))),(0,n.kt)(l.Z,{value:"go",label:"Go",mdxType:"TabItem"},(0,n.kt)("p",null,"GoLang docs for user tasks coming soon. But if you want, you can try it out anyways \ud83d\ude09."))),(0,n.kt)("h3",{id:"reminder-tasks"},"Reminder Tasks"),(0,n.kt)("p",null,"You can use the ",(0,n.kt)("inlineCode",{parentName:"p"},"UserTaskOutput"),' to schedule a "Reminder Task", which is a ',(0,n.kt)("inlineCode",{parentName:"p"},"TaskRun")," that runs a set period of time after the User Task is scheduled. If the ",(0,n.kt)("inlineCode",{parentName:"p"},"UserTaskRun")," has been completed, cancelled, or reassigned by the time the Reminder Task is scheduled, ",(0,n.kt)("em",{parentName:"p"},"the Reminder Task does not execute.")),(0,n.kt)(s.Z,{mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"java",label:"Java",default:!0,mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-java"},'UserTaskOutput userTask = wf.assignTaskToUser("some-task", "yoda");\n\nint delaySeconds = 60; // wait one minute before reminder\n\nString taskArg1 = "reply to my email, you must!";\nString taskArg2 = "for my ally is the Force, and a powerful ally it is";\n\nString taskDefName = "send-reminder";\nwf.scheduleTaskAfter(userTask, delaySeconds, taskDefName, taskArg1, taskArg2);\n'))),(0,n.kt)(l.Z,{value:"go",label:"Go",mdxType:"TabItem"},(0,n.kt)("p",null,"GoLang support for user tasks coming soon."))),(0,n.kt)("h3",{id:"automatic-reassignment"},"Automatic Reassignment"),(0,n.kt)("p",null,"You can use the ",(0,n.kt)("inlineCode",{parentName:"p"},"UserTaskOutput"),' to automatically "release" a task from a specific user to that user\'s group after a period of time passes.'),(0,n.kt)("admonition",{type:"note"},(0,n.kt)("p",{parentName:"admonition"},"This only works if you assign the user task to a user ",(0,n.kt)("em",{parentName:"p"},"and specify the group the user belongs to"),".")),(0,n.kt)(s.Z,{mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"java",label:"Java",default:!0,mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-java"},'String userGroup = "jedi-council";\nUserTaskOutput userTask = wf.assignUsrTask("some-task", "Mace Windu", userGroup);\n\n// If Mace Windu doesn\'t respond in 1 hour, allow any other Jedi Council member to claim\n// the task.\nwf.releaseToGroupOnDeadline(userTask, 60 * 60);\n'))),(0,n.kt)(l.Z,{value:"go",label:"Go",mdxType:"TabItem"},(0,n.kt)("p",null,"GoLang support for user tasks coming soon. But if you want, you can try it out anyways \ud83d\ude09."))))}k.isMDXComponent=!0}}]);